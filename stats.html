<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
        
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
		integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
		integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
	<style>
		.bd-placeholder-img {
			font-size: 1.125rem;
			text-anchor: middle;
			-webkit-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}

		@media (min-width: 768px) {
			.bd-placeholder-img-lg {
				font-size: 3.5rem;
			}
		}
	</style>
	<script>
		window.onload = function() {

			var dataTournageReal = [];
			var dataTournageArdt = [];
			var dataTypeTournage = [];
			var line;
			
			function numberLine(data){
				line = data.nb;
				
			}
			<!-- console.log(line); -->
			
			$.getJSON('http://localhost:444/nombredeligne',numberLine);
			
			//Chart du nombre de tournage par Réalisateur
			var TournageReal = new CanvasJS.Chart("TournageReal", {
			animationEnabled: true,  
			title:{
				text: "Nombre de tournages par film"
			},
			axisY: {
				title: "Nombre de tournage",
				valueFormatString: "#0,,.",
				suffix: "mn",
				prefix: "$"
			},
			data: [{
				type: "splineArea",
				color: "rgba(54,158,173,.7)",
				markerSize: 5,
				xValueFormatString: "YYYY",
				yValueFormatString: "$#,##0.##",
				dataPoints: dataTournageReal
			}]
			});

		function DataTournageReal(data) {
			var temp = (Object.getOwnPropertyNames(data.result))
				for (var i = 0; i < data.taille; i++) {
					dataTournageReal.push({
						x : i*10,
						y : data.result[temp[i]],
						label : temp[i]
					});
				}
				TournageReal.render();
			}
			$.getJSON('http://localhost:444/tournagesparreal',DataTournageReal);
			
			
			<!-- Idée de statistiques: -->
				<!-- - Nombre de tournages par film --> Fait
				<!-- - Nombre de tournages par réalisateur --> Fait
				<!-- - Nombre de tournages par mois -->
				<!-- - Nombre de tournages par arrondissement --> Fait
				<!-- - Nombre de tournages par organisme demandeur --> Fait
				<!-- - Nombre de tournages entre deux dates comprise -->
				<!-- -  //Faire un bouton qui affiche un deuxieme bouton avec le deuxieme parametre 
				
				-->

			
			//Nombre de tournages par arrondissement
			var TournageArrdt = new CanvasJS.Chart("TournageArrdt", {
				animationEnabled: true,
				
				title:{
					text:"Nombre de tournages par arrondissement"
				},
				axisX:{
					interval: 2
				},
				axisY2:{
					interlacedColor: "rgba(1,77,101,.2)",
					gridColor: "rgba(1,77,101,.1)",
					title: "Nombre de tournages"
				},
				data: [{
					type: "bar",
					name: "Arrondissement",
					axisYType: "secondary",
					color: "#014D65",
					dataPoints: dataTournageArdt
				}]
			});
			
			
			function DataTournageArdt(data) {
			var temp = (Object.getOwnPropertyNames(data.result))
				for (var i = 0; i < data.taille; i++) {
					dataTournageArdt.push({
						y: data.result[temp[i]],
						label : temp[i]
					});
				}
				TournageArrdt.render();
			}
			$.getJSON('http://localhost:444/tournagesparardt',DataTournageArdt);

		
		//Pourcentage de chaque type de tournage
		var TypeTournage = new CanvasJS.Chart("TypeTournage", {
			theme: "light2",
			animationEnabled: true,
			title: {
				text: "Type de Tournage"
			},
			data: [{
				type: "pie",
				startAngle: 240,
				yValueFormatString: "##0.00\"%\"",
				indexLabel: "{label} {y}",
				dataPoints: dataTypeTournage
			}]
		});
		
		function DataTypeTournage(data) {
			var temp = (Object.getOwnPropertyNames(data.result))
				for (var i = 0; i < data.taille; i++) {
					dataTypeTournage.push({
						y: (data.result[temp[i]]/line)*100,
						label : temp[i]
					});
				}
				TypeTournage.render();
			}
			$.getJSON('http://localhost:444/tournagespartype',DataTypeTournage);
		
		}
		
	function choix(){
		var liste, texte;
		liste = document.getElementById("ChartChoice");
		texte = liste.options[liste.selectedIndex].text;
		console.log(texte);
		
		if(texte == 'Chart 1'){
			document.getElementById('TournageReal').style.display='block';
			document.getElementById('TournageArrdt').style.display='none';
			document.getElementById('TypeTournage').style.display='none';
		}
		if(texte == 'Chart 2'){
			document.getElementById('TournageArrdt').style.display='block';
			document.getElementById('TournageReal').style.display='none';
			document.getElementById('TypeTournage').style.display='none';
		}
		if(texte == 'Chart 3'){
			document.getElementById('TypeTournage').style.display='block';
			document.getElementById('TournageReal').style.display='none';
			document.getElementById('TournageArrdt').style.display='none';
		}
	}
	
	
	</script>
	<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>


	<style data-styled-components=""></style>
</head>

<body>

	<h2><a href="http://localhost:444/" role="button"><i class="fas fa-arrow-circle-left"></i> &nbsp;Retour à la carte</a>
	</h2>
	
	
	<form>
	  <div class="form-group">
		<h2><label for="ChartChoice">Quelles Chart voulez vous ?</label></h2>
		<select class="form-control" id="ChartChoice">
		  <option>Chart 1</option>
		  <option>Chart 2</option>
		  <option>Chart 3</option>
		  <option disabled>Chart 4</option>
		  <option disabled>Chart 5</option>
		</select>
	  </div>
	  <button type="button" onclick="choix()" class="btn btn-primary">Valider</button>
	</form>
	
	<div class="container" style="height: 700px; width: 100%;">
	<div id="TournageReal" style="display:none;"></div>
	<div id="TournageArrdt" style="display:none;"></div>
	<div id="TypeTournage" style="display:none;"></div>
	</div>



	<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>

</body>

</html>